<!DOCTYPE html>
<html lang="en">
<head>




<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<meta name="generator" content="Orchid 0.17.6"/>
<link rel="icon" href="https://protelis.github.io/wiki-beta/favicon.ico">


<meta name="robots" content="index, follow">



<title>[0.1.0] Peer-to-peer route planning</title>


<meta name="description" content="Practical language for aggregate programming.">



<link rel="prev" href="https://protelis.github.io/wiki-beta/wiki/examples/quanticol2016">


<link rel="next" href="https://protelis.github.io/wiki-beta/wiki/examples/sac2015networkmanagement">


<script>
    window.site = {"orchidVersion":"0.17.6","baseUrl":"https://protelis.github.io/wiki-beta","environment":"debug","version":"13.1.0-dev0e+5eff8185"};
</script>





<!-- start:debug info -->

<!-- THEME -->
<!-- Type: BsDoc -->
<!-- Class: com.eden.orchid.bsdoc.BSDocTheme -->

<!-- PAGE -->
<!-- Type: wiki -->
<!-- Class: com.eden.orchid.wiki.pages.WikiPage -->
<!-- Layout: index -->
<!-- Resolved Layout: templates/layouts/index.peb -->
<!-- Page Template: wiki, page -->
<!-- Resolved Page Template:  -->

<!-- RESOURCE -->
<!-- Class: com.eden.orchid.api.resources.resource.FileResource -->
<!-- Source Filename: wiki/examples/sac2015p2pplanning.md -->

<!-- COMPLETE PAGE CONFIGURATION -->
<script>
    window.allData = {"reference":{"path":"wiki/examples","baseUrl":"https://protelis.github.io/wiki-beta","fileName":"sac2015p2pplanning","extension":"html","usePrettyUrl":true,"link":"https://protelis.github.io/wiki-beta/wiki/examples/sac2015p2pplanning"},"next":{"path":"wiki/examples","baseUrl":"https://protelis.github.io/wiki-beta","fileName":"sac2015networkmanagement","extension":"html","usePrettyUrl":true,"link":"https://protelis.github.io/wiki-beta/wiki/examples/sac2015networkmanagement"},"previous":{"path":"wiki/examples","baseUrl":"https://protelis.github.io/wiki-beta","fileName":"quanticol2016","extension":"html","usePrettyUrl":true,"link":"https://protelis.github.io/wiki-beta/wiki/examples/quanticol2016"},"description":"","title":"[0.1.0] Peer-to-peer route planning"};
</script>

<!-- end:debug info -->



<!-- start:inject styles -->
<link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />
<link rel="stylesheet" type="text/css" href="https://protelis.github.io/wiki-beta/BsDoc/b80036ee/assets/css/bsdoc.css" />
<link rel="stylesheet" type="text/css" href="https://protelis.github.io/wiki-beta/assets/css/pygments.css" />
<link rel="stylesheet" type="text/css" href="https://rawgit.com/PrismJS/prism-themes/master/themes/prism-ghcolors.css" />
<!-- end:inject styles -->


</head>
<body>




<a class="github-fork-ribbon left-top"
   href="https://github.com/Protelis/Protelis"
   title="Fork me on GitHub">Fork me on GitHub</a>


<header class="navbar navbar-fixed-top bs-docs-nav">
    <div class="container">
        <div class="navbar-header" role="banner">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://protelis.github.io/wiki-beta">Protelis: aggregate programming</a>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
            <ul class="nav navbar-nav navbar-right">
                
                    
                        <li><a href="https://protelis.github.io/wiki-beta">Home</a></li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Understand<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/understand/basics">Aggregate programming basics</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/understand/architecture">Protelis&#39; architecture</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/understand/syntax">Upgrade guide</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Use<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/installation">Prerequisites</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/alchemist">Tutorial: simulation with Alchemist</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/demo">Tutorial: demo projects</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/worldwind">Example: Protelis with NASA WorldWind</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Develop<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/develop/structure">Project structure</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/develop/releases">Creating Releases</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Examples and demos<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/examples/quanticol2016">[13.1.0-dev0e+5eff8185] Crowd danger estimation and warning</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/examples/sac2015p2pplanning">[0.1.0] Peer-to-peer route planning</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/examples/sac2015networkmanagement">[0.1.0] Network services management</a></li>
                                
                            </ul>
                        </li>
                    
                
            </ul>
        </nav>
    </div>
</header>


<div id="top"></div>


    <div class="bs-docs-masthead" id="jumbotron">
        <div class="container">
            <h1 class="home-title">[0.1.0] Peer-to-peer route planning</h1>
        </div>
    </div>


<div class="container bs-docs-container">
    <div class="row">
        <div class="col-md-9" role="main">
        <nav aria-label="breadcrumb">
    <ul class="breadcrumb">
    
    
        <li class="breadcrumb-item"><a href="https://protelis.github.io/wiki-beta/wiki">Wiki</a></li>
    
    
    
        <li class="breadcrumb-item active" aria-current="page">[0.1.0] Peer-to-peer route planning</li>
    
    
    </ul>
</nav>
        

        
        
            
    <!-- start:inject components -->
    
        
            
                
                    
                        <p><strong>Note:</strong> This example uses an old version of Protelis. As such, the provided code might not work with newer releases.</p>
<h1 id="peer-to-peer-route-planning">Peer-to-peer route planning</h1>
<p>This example has been presented in the paper:</p>
<p><a href="https://doi.org/10.1145/2695664.2695913"><strong>Protelis: Practical Aggregate Programming</strong> <em>by Danilo Pianini, Mirko Viroli, Jacob Beal; published in the Proceedings of the 30th Annual ACM Symposium on Applied Computing, April 2015</em></a></p>
<p>When two people want to meet up at a large event, they may be hampered when a pre-arranged rendezvous point turns out to be inconvenient,
while any centralized services for real-time coordination are overwhelmed by demand.
Peer-to-peer calculations between participating devices could guide the two friends to meet at an intermediate location,
regardless of the continued movement of the two friends and participating devices in the area.</p>
<h2 id="code-samples-and-illustrations-from-a-simulation">Code samples and illustrations from a simulation</h2>
<p>Using some of Protelis' special operators and syntax, a small number of functions can be defined and applied to variables.
<em>Alice</em> and <em>Bob</em> can be directed toward each other (red dots) through the peer-to-peer calculations performed on participating devices (blue dots).</p>
<p>The function <code>distanceTo</code> computes the minimum distance from any device to the nearest <em>source device</em> (a device where <code>source</code> is <code>true</code>).
The field <code>d</code> is initially <code>Infinity</code> everywhere, but is set to <code>0</code> on sources and set to the minimum across neighbors of the sum of <code>d</code> and the estimated distance to the current device.</p>
<pre><code class="language-python">def distanceTo(source) {
  rep(d &lt;- Infinity) {
    mux (source) { 0 }
    else { minHood(nbr(d) + nbrRange) }
  }
}
</code></pre>
<p>The function <code>descend</code> follows the gradient of a potential field down from a source.
Given an original device (<code>self</code>) and a potential potential field,
this function builds a path of intermediate devices connecting the original device with the source of the potential field.
The original device is marked as part of the path.
Other devices are identified as being on the path if one of their neighbors is already on the path,
and they are the closest of that neighborâ€™s neighbors to the destination.</p>
<pre><code class="language-python">def rendezvous(person1, person2) {
  descend(person1 == owner, distanceTo(person2) == owner))
}
</code></pre>
<p>The <code>rendezvous</code> function uses the descend function to identify the path between two people, whose devices have been marked with the owner property.</p>
<pre><code class="language-python">def rendezvous(person1, person2) {
  descend(person1 == owner, distanceTo(person2) == owner))
}
</code></pre>
<p><img src="https://protelis.github.io/wiki-beta/assets/media/images/examples/sac2015p2pplanning/peer-to-peer-1.png" alt="peer-to-peer-1" /></p>
<p>Imagine an initial configuration where a number of individuals carrying participating devices (blue dots) are attending a large event,
and two of them (Alice and Bob, as two yellow squares) wish to meet up.</p>
<p><img src="https://protelis.github.io/wiki-beta/assets/media/images/examples/sac2015p2pplanning/peer-to-peer-2.png" alt="peer-to-peer-2" /></p>
<p>Alice and Bob activate their rendezvous application,
and nearby devices that are on the shortest path between them start to be selected as part of their rendezvous path (red dots).</p>
<p><img src="https://protelis.github.io/wiki-beta/assets/media/images/examples/sac2015p2pplanning/peer-to-peer-3.png" alt="peer-to-peer-3" /></p>
<p>No central information service is needed for peer-to-peer calculation of the shortest path.</p>
<p><img src="https://protelis.github.io/wiki-beta/assets/media/images/examples/sac2015p2pplanning/peer-to-peer-4.png" alt="peer-to-peer-4" /></p>
<p>The complete path is calculated, and will update automatically as Alice and Bob walk toward each other, and as intermediate devices move around.</p>

                    
                
            
        
            
        
    
    <!-- end:inject components -->


        
        </div>

        <!-- Page navigation
        =========================================== -->
        <div class="col-md-3" role="complementary">
        <div class="bs-docs-sidebar hidden-print" id="bs-docs-sidebar">
    

    <ul class="nav bs-docs-sidenav">
        
    </ul>

    
    <!-- start:inject components -->
    
    <!-- end:inject components -->



    <a class="back-to-top" href="#top">
        <i class="glyphicon glyphicon-chevron-up"></i> Back to top
    </a>
</div>

        </div>
    </div>
</div>


<div id="footer">
    <div class="container bs-docs-container">
    <footer class="bs-docs-footer" role="contentinfo">
    <div class="row">
        <div class="col-xs-12">
            <nav aria-label="navigateClasses">
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="https://protelis.github.io/wiki-beta/wiki/examples/quanticol2016">
                                <span aria-hidden="true">&larr;</span>
                                <span>[13.1.0-dev0e+5eff8185] Crowd danger estimation and warning</span>
                            </a>
                        </li>
                    

                    
                        <li class="next">
                            <a href="https://protelis.github.io/wiki-beta/wiki/examples/sac2015networkmanagement">
                                <span>[0.1.0] Network services management</span>
                                <span aria-hidden="true">&rarr;</span>
                            </a>
                        </li>
                    
                </ul>
            </nav>
        </div>
    </div>
    <div class="icons">
    
    
        <a href="https://github.com/Protelis/Protelis" class="fa fa-github"></a>
    
    
    </div>
    <br>
    <p>
    Documentation template based on the
    <a href="https://github.com/mistic100/jekyll-bootstrap-doc">Jekyll Bootstrap Doc</a>
    Jekyll theme by the <a href="https://getbootstrap.com">Bootstrap team</a>. Site created with
    <a href="https://orchid.netlify.com">Orchid</a>.
</p>

<ul class="bs-docs-footer-links muted">
    <li>Currently 13.1.0-dev0e+5eff8185</li>
</ul>

</footer>
    </div>
</div>


<!-- start:inject scripts -->
<script  src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script  src="https://netdna.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.3.0/bootbox.min.js"></script>
<script  src="https://protelis.github.io/wiki-beta/BsDoc/b80036ee/assets/js/bsdoc.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/prism.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-kotlin.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-java.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-groovy.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-yaml.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-asciidoc.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-dart.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-markdown.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-python.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-javascript.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-xml.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-scala.min.js"></script>
<!-- end:inject scripts -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/trianglify/1.2.0/trianglify.min.js"></script>

<script>
    $(function () {
        window.colors = ['#2299d8', '#000000'];
                  
    trianglify({});

        buildNav();
    });
</script>

</body>
</html>