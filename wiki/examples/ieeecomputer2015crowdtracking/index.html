<!DOCTYPE html>
<html lang="en">
<head>




<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<meta name="generator" content="Orchid 0.17.6"/>
<link rel="icon" href="https://protelis.github.io/wiki-beta/favicon.ico">


<meta name="robots" content="index, follow">



<title>Crowd danger estimation and warning</title>


<meta name="description" content="Practical language for aggregate programming.">



<link rel="prev" href="https://protelis.github.io/wiki-beta/wiki/examples">


<link rel="next" href="https://protelis.github.io/wiki-beta/wiki/examples/ecas2016crowddispersal">


<script>
    window.site = {"orchidVersion":"0.17.6","baseUrl":"https://protelis.github.io/wiki-beta","environment":"debug","version":"13.1.0-dev0f+6aed1deb"};
</script>





<!-- start:debug info -->

<!-- THEME -->
<!-- Type: BsDoc -->
<!-- Class: com.eden.orchid.bsdoc.BSDocTheme -->

<!-- PAGE -->
<!-- Type: wiki -->
<!-- Class: com.eden.orchid.wiki.pages.WikiPage -->
<!-- Layout: index -->
<!-- Resolved Layout: templates/layouts/index.peb -->
<!-- Page Template: wiki, page -->
<!-- Resolved Page Template:  -->

<!-- RESOURCE -->
<!-- Class: com.eden.orchid.api.resources.resource.FileResource -->
<!-- Source Filename: wiki/examples/ieeecomputer2015crowdtracking.md -->

<!-- COMPLETE PAGE CONFIGURATION -->
<script>
    window.allData = {"reference":{"path":"wiki/examples","baseUrl":"https://protelis.github.io/wiki-beta","fileName":"ieeecomputer2015crowdtracking","extension":"html","usePrettyUrl":true,"link":"https://protelis.github.io/wiki-beta/wiki/examples/ieeecomputer2015crowdtracking"},"next":{"path":"wiki/examples","baseUrl":"https://protelis.github.io/wiki-beta","fileName":"ecas2016crowddispersal","extension":"html","usePrettyUrl":true,"link":"https://protelis.github.io/wiki-beta/wiki/examples/ecas2016crowddispersal"},"previous":{"path":"wiki","baseUrl":"https://protelis.github.io/wiki-beta","fileName":"examples","extension":"html","usePrettyUrl":true,"link":"https://protelis.github.io/wiki-beta/wiki/examples"},"description":"","title":"Crowd danger estimation and warning"};
</script>

<!-- end:debug info -->



<!-- start:inject styles -->
<link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />
<link rel="stylesheet" type="text/css" href="https://protelis.github.io/wiki-beta/BsDoc/b80036ee/assets/css/bsdoc.css" />
<link rel="stylesheet" type="text/css" href="https://protelis.github.io/wiki-beta/assets/css/pygments.css" />
<link rel="stylesheet" type="text/css" href="https://rawgit.com/PrismJS/prism-themes/master/themes/prism-ghcolors.css" />
<!-- end:inject styles -->


</head>
<body>




<a class="github-fork-ribbon left-top"
   href="https://github.com/Protelis/Protelis"
   title="Fork me on GitHub">Fork me on GitHub</a>


<header class="navbar navbar-fixed-top bs-docs-nav">
    <div class="container">
        <div class="navbar-header" role="banner">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://protelis.github.io/wiki-beta">Protelis: aggregate programming</a>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
            <ul class="nav navbar-nav navbar-right">
                
                    
                        <li><a href="https://protelis.github.io/wiki-beta">Home</a></li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Understand<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/understand/basics">Aggregate programming basics</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/understand/architecture">Protelis&#39; architecture</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/understand/syntax">Upgrade guide</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Use<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/installation">Prerequisites</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/alchemist">Tutorial: simulation with Alchemist</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/demo">Tutorial: demo projects</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/worldwind">Example: Protelis with NASA WorldWind</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Develop<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/develop/structure">Project structure</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/develop/releases">Creating Releases</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Examples and demos<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/examples/ieeecomputer2015crowdtracking">Crowd danger estimation and warning</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/examples/ecas2016crowddispersal">Crowd dispersal service</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/examples/sac2015p2pplanning">Peer-to-peer route planning</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/examples/sac2015networkmanagement">Network services management</a></li>
                                
                            </ul>
                        </li>
                    
                
            </ul>
        </nav>
    </div>
</header>


<div id="top"></div>


    <div class="bs-docs-masthead" id="jumbotron">
        <div class="container">
            <h1 class="home-title">Crowd danger estimation and warning</h1>
        </div>
    </div>


<div class="container bs-docs-container">
    <div class="row">
        <div class="col-md-9" role="main">
        <nav aria-label="breadcrumb">
    <ul class="breadcrumb">
    
    
        <li class="breadcrumb-item"><a href="https://protelis.github.io/wiki-beta/wiki">Wiki</a></li>
    
    
    
        <li class="breadcrumb-item active" aria-current="page">Crowd danger estimation and warning</li>
    
    
    </ul>
</nav>
        

        
        
            
    <!-- start:inject components -->
    
        
            
                
                    
                        <p><strong>Note:</strong> This example uses Protelis version 0.8.3, while current version is 13.1.0-dev0f+6aed1deb.
As such, the provided code might not work with newer releases.</p>
<p>This example has been presented in the paper:</p>
<p><a href="https://doi.org/10.1109/MC.2015.261"><strong>Aggregate Programming for the Internet of Things</strong> <em>by Jacob Beal, Danilo Pianini, and Mirko Viroli; published in IEEE Computer</em></a></p>
<p>Any time an event or attraction draws a crowd,
individuals may continue to move into the most crowded areas and inadvertently obstruct egress,
creating dangerously dense-packed locations vulnerable to stampedes.
In addition to the motivation of avoiding danger,
people may also want to avoid highly congested spots because the experience is unpleasant.
Distributed sensing and computing can help solve this problem.</p>
<p>Using Protelis and the principles of aggregate programming,
it is straightforward to write a scalable and robust distributed application to detect severe crowding and help individuals navigate around highly congested areas.
We illustrate the use of several core Protelis operators and built-in functions.</p>
<p>Using some of Protelis’s special operators and syntax, a small number of functions can be defined and applied to variables.
A crowd safety service can use information about the number of nearby devices to issue warnings about areas with dangerous crowding levels.</p>
<p>The function <code>dangerousDensity</code> flags whether a location has a high or low danger.
The function determines danger by estimating the local density of people,
using the values of p (proportion of people with a participating device running this app),
r (the radius of interest),
and checking large groups of people (&gt;300) against a density danger cut-off value of 2.17 people per square meter.</p>
<pre><code class="language-javascript">def dangerousDensity(p, r) {
  let mr =  managementRegions(r*2, () -&gt; { nbrRange });
  let danger =  average(mr, densityEst(p, r)) &gt; 2.17 &amp;&amp; summarize(mr, sum, 1 / p, 0 ) &gt; 300;
  if(danger) { high } else { low }
}
</code></pre>
<p>The function <code>crowdTracking</code> checks for a dangerous density in crowded areas, where 1.08 people per square meter is used as the cut-off to define crowded.</p>
<pre><code class="language-javascript">def crowdTracking(p, r, t) {
  let crowdRgn =  recentTrue(densityEst(p, r) &gt; 1.08, t);
  if(crowdRgn) { densityEst(p, r) } else { none }
}
</code></pre>
<p>The function <code>crowdWarning</code> alerts individuals who are near dangerously crowded spots.</p>
<pre><code class="language-javascript">def crowdWarning(p, r, warn, t) {
  distanceTo(crowdTracking(p, r, t) == high) &lt; warn
}
</code></pre>
<p><img src="https://protelis.github.io/wiki-beta/assets/media/images/examples/ieeecomputer2015crowdtracking/marathon.png" alt="Vienna Marathon" /></p>
<p>In this simulation of the 2013 Vienna Marathon, dots represent devices running the crowd safety service.
Red dots are devices in locations with potentially dangerous crowd density and yellow dots are devices providing crowd density warnings.</p>
<p><img src="https://protelis.github.io/wiki-beta/assets/media/images/examples/ieeecomputer2015crowdtracking/crowd-management.jpg" alt="Crowd Management" /></p>
<p>In this simulation of public events near the Boston waterfront, dots represent devices running the crowd safety service.
Red dots are devices in locations with potentially dangerous crowd density and yellow dots are devices providing crowd density warnings.</p>

                    
                
            
        
            
        
    
    <!-- end:inject components -->


        
        </div>

        <!-- Page navigation
        =========================================== -->
        <div class="col-md-3" role="complementary">
        <div class="bs-docs-sidebar hidden-print" id="bs-docs-sidebar">
    

    <ul class="nav bs-docs-sidenav">
        
    </ul>

    
    <!-- start:inject components -->
    
    <!-- end:inject components -->



    <a class="back-to-top" href="#top">
        <i class="glyphicon glyphicon-chevron-up"></i> Back to top
    </a>
</div>

        </div>
    </div>
</div>


<div id="footer">
    <div class="container bs-docs-container">
    <footer class="bs-docs-footer" role="contentinfo">
    <div class="row">
        <div class="col-xs-12">
            <nav aria-label="navigateClasses">
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="https://protelis.github.io/wiki-beta/wiki/examples">
                                <span aria-hidden="true">&larr;</span>
                                <span>Examples and demos</span>
                            </a>
                        </li>
                    

                    
                        <li class="next">
                            <a href="https://protelis.github.io/wiki-beta/wiki/examples/ecas2016crowddispersal">
                                <span>Crowd dispersal service</span>
                                <span aria-hidden="true">&rarr;</span>
                            </a>
                        </li>
                    
                </ul>
            </nav>
        </div>
    </div>
    <div class="icons">
    
    
        <a href="https://github.com/Protelis/Protelis" class="fa fa-github"></a>
    
    
    </div>
    <br>
    <p>
    Documentation template based on the
    <a href="https://github.com/mistic100/jekyll-bootstrap-doc">Jekyll Bootstrap Doc</a>
    Jekyll theme by the <a href="https://getbootstrap.com">Bootstrap team</a>. Site created with
    <a href="https://orchid.netlify.com">Orchid</a>.
</p>

<ul class="bs-docs-footer-links muted">
    <li>Currently 13.1.0-dev0f+6aed1deb</li>
</ul>

</footer>
    </div>
</div>


<!-- start:inject scripts -->
<script  src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script  src="https://netdna.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.3.0/bootbox.min.js"></script>
<script  src="https://protelis.github.io/wiki-beta/BsDoc/b80036ee/assets/js/bsdoc.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/prism.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-kotlin.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-java.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-groovy.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-yaml.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-asciidoc.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-dart.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-markdown.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-python.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-javascript.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-xml.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-scala.min.js"></script>
<!-- end:inject scripts -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/trianglify/1.2.0/trianglify.min.js"></script>

<script>
    $(function () {
        window.colors = ['#2299d8', '#000000'];
                  
    trianglify({});

        buildNav();
    });
</script>

</body>
</html>