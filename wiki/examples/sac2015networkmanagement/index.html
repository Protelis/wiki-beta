<!DOCTYPE html>
<html lang="en">
<head>




<meta charset="utf-8"/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
<meta name="generator" content="Orchid 0.17.6"/>
<link rel="icon" href="https://protelis.github.io/wiki-beta/favicon.ico">


<meta name="robots" content="index, follow">



<title>[0.1.0] Network services management</title>


<meta name="description" content="Practical language for aggregate programming.">



<link rel="prev" href="https://protelis.github.io/wiki-beta/wiki/examples/sac2015p2pplanning">



<script>
    window.site = {"orchidVersion":"0.17.6","baseUrl":"https://protelis.github.io/wiki-beta","environment":"debug","version":"13.1.0-dev0d+10aa36bd"};
</script>





<!-- start:debug info -->

<!-- THEME -->
<!-- Type: BsDoc -->
<!-- Class: com.eden.orchid.bsdoc.BSDocTheme -->

<!-- PAGE -->
<!-- Type: wiki -->
<!-- Class: com.eden.orchid.wiki.pages.WikiPage -->
<!-- Layout: index -->
<!-- Resolved Layout: templates/layouts/index.peb -->
<!-- Page Template: wiki, page -->
<!-- Resolved Page Template:  -->

<!-- RESOURCE -->
<!-- Class: com.eden.orchid.api.resources.resource.FileResource -->
<!-- Source Filename: wiki/examples/sac2015networkmanagement.md -->

<!-- COMPLETE PAGE CONFIGURATION -->
<script>
    window.allData = {"reference":{"path":"wiki/examples","baseUrl":"https://protelis.github.io/wiki-beta","fileName":"sac2015networkmanagement","extension":"html","usePrettyUrl":true,"link":"https://protelis.github.io/wiki-beta/wiki/examples/sac2015networkmanagement"},"previous":{"path":"wiki/examples","baseUrl":"https://protelis.github.io/wiki-beta","fileName":"sac2015p2pplanning","extension":"html","usePrettyUrl":true,"link":"https://protelis.github.io/wiki-beta/wiki/examples/sac2015p2pplanning"},"description":"","title":"[0.1.0] Network services management"};
</script>

<!-- end:debug info -->



<!-- start:inject styles -->
<link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" />
<link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.0/gh-fork-ribbon.min.css" />
<link rel="stylesheet" type="text/css" href="https://protelis.github.io/wiki-beta/BsDoc/5d2166d8/assets/css/bsdoc.css" />
<link rel="stylesheet" type="text/css" href="https://protelis.github.io/wiki-beta/assets/css/pygments.css" />
<link rel="stylesheet" type="text/css" href="https://rawgit.com/PrismJS/prism-themes/master/themes/prism-ghcolors.css" />
<!-- end:inject styles -->


</head>
<body>




<a class="github-fork-ribbon left-top"
   href="https://github.com/Protelis/Protelis"
   title="Fork me on GitHub">Fork me on GitHub</a>


<header class="navbar navbar-fixed-top bs-docs-nav">
    <div class="container">
        <div class="navbar-header" role="banner">
            <button class="navbar-toggle" type="button" data-toggle="collapse" data-target=".bs-navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://protelis.github.io/wiki-beta">Protelis: aggregate programming</a>
        </div>
        <nav class="collapse navbar-collapse bs-navbar-collapse" role="navigation">
            <ul class="nav navbar-nav navbar-right">
                
                    
                        <li><a href="https://protelis.github.io/wiki-beta">Home</a></li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Understand<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/understand/basics">Aggregate programming basics</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/understand/architecture">Protelis&#39; architecture</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/understand/syntax">Upgrade guide</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Use<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/installation">Prerequisites</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/alchemist">Tutorial: simulation with Alchemist</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/demo">Tutorial: demo projects</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/use/worldwind">Example: Protelis with NASA WorldWind</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Develop<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/develop/structure">Project structure</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/develop/releases">Creating Releases</a></li>
                                
                            </ul>
                        </li>
                    
                
                    
                        <li class="dropdown">
                            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Examples and demos<span class="caret"></span></a>
                            <ul class="dropdown-menu scrollable-menu">
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/examples/quanticol2016">[13.1.0-dev0d+10aa36bd] Crowd danger estimation and warning</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/examples/sac2015p2pplanning">[0.1.0] Peer-to-peer route planning</a></li>
                                
                                    <li><a href="https://protelis.github.io/wiki-beta/wiki/examples/sac2015networkmanagement">[0.1.0] Network services management</a></li>
                                
                            </ul>
                        </li>
                    
                
            </ul>
        </nav>
    </div>
</header>


<div id="top"></div>


    <div class="bs-docs-masthead" id="jumbotron">
        <div class="container">
            <h1 class="home-title">[0.1.0] Network services management</h1>
        </div>
    </div>


<div class="container bs-docs-container">
    <div class="row">
        <div class="col-md-9" role="main">
        <nav aria-label="breadcrumb">
    <ul class="breadcrumb">
    
    
        <li class="breadcrumb-item"><a href="https://protelis.github.io/wiki-beta/wiki">Wiki</a></li>
    
    
    
        <li class="breadcrumb-item active" aria-current="page">[0.1.0] Network services management</li>
    
    
    </ul>
</nav>
        

        
        
            
    <!-- start:inject components -->
    
        
            
                
                    
                        <p><strong>Note:</strong> This example uses an old version of Protelis. As such, the provided code might not work with newer releases.</p>
<h1 id="network-services-management">Network services management</h1>
<p>This example has been presented in the paper:</p>
<p><a href="https://doi.org/10.1145/2695664.2695913"><strong>Protelis: Practical Aggregate Programming</strong> <em>by Danilo Pianini, Mirko Viroli, Jacob Beal; published in the Proceedings of the 30th Annual ACM Symposium on Applied Computing, April 2015</em></a></p>
<p>A common problem in managing enterprise services is a failure in one or more services can cause the overall system to get wedged,
due to many dependences between different services and server.
After such a failure cascade, the network can only become fully functional by restarting the servers and services in the correct order.
Network services management can coordinate the order of shutdown and restarts.</p>
<p>Using Protelis and the principles of aggregate programming,
it is straightforward to write a daemon to monitor each service and communicate with other services to execute a coordinated shutdown and restart.
We illustrate how dependency-directed coordination can be implemented with very little code.</p>
<p><img src="https://protelis.github.io/wiki-beta/assets/media/images/examples/sac2015networkmanagement/dependent-services-network.png" alt="Dependent Service Network" /></p>
<p>This example scenario features an enterprise network for a small company,
with dependencies between two key databases and the internal and external servers running web applications.
The scenario was implemented on a network of EmuLab servers,
with the services emulated as simple query-response networking programs in Java that entered a “hung” state
either by being externally triggered to crash or after their queries began to consistently fail.</p>
<p>Each service was wrapped with an embedded Protelis execution engine,
which was interfaced with the services by a small piece of monitoring glue code that inserted environment variables
containing an indentifier for the <code>serviceID</code> running on that server,
a tuple of identifier for <code>dependencies</code>,
and the current <code>managedServiceStatus</code> of <code>stop</code>, <code>starting</code>, <code>run</code>, <code>stopping</code>, or <code>hung</code>.
The glue code also provided <code>stopService</code> and <code>startService</code> methods to send signals to the service,
track interactions between the services in order to maintain the set of neighbors for Protelis,
and allowed an external monitoring applications to attach and receive status reports.</p>
<p><img src="https://protelis.github.io/wiki-beta/assets/media/images/examples/sac2015networkmanagement/restart.png" alt="Distributed Restart" /></p>
<p>In this screenshot of the emulated network of services on machines, we see that the supplies database has crashed,
triggering a graceful shutdown cascade of dependent services. Upon restart of the supplies database,
the rest of the services would automatically restart in the correct order,
if each service was running the following Protelis network management code.</p>
<p>These variables track the services that should be reachable (<code>nbr_set</code>),
the services that are needed but are not reachable (<code>nbr_missing</code>),
the services that are required due to dependencies (<code>nbr_required</code>),
and the nearby services that are down (<code>nbr_down</code>).</p>
<pre><code class="language-javascript">let nbr_set = unionHood(nbr([serviceID]));
let nbr_missing = dependencies.subtract(nbr_set);
let nbr_required = #contains(dependencies, nbr(serviceID));
let nbr_down = nbr(managedServiceStatus == &quot;hung&quot; || managedServiceStatus == &quot;stop&quot;);
</code></pre>
<p>The variable <code>problem</code> tracks whether this service is currently safe to run.</p>
<pre><code class="language-javascript">let problem = anyHood(nbr_down &amp;&amp; nbr_required) || !nbr_missing.isEmpty();
</code></pre>
<p>This code takes this service down or up, depending on if it is safe to run.</p>
<pre><code class="language-javascript">if(managedServiceStatus == &quot;run&quot; &amp;&amp; problem) {
  #stopProcess(managedService);
} else  {
  if(managedServiceStatus == &quot;stop&quot; &amp;&amp; !problem) {
    #startProcess(managedService);
  } else  {
    managedServiceStatus;
  }
}
</code></pre>

                    
                
            
        
            
        
    
    <!-- end:inject components -->


        
        </div>

        <!-- Page navigation
        =========================================== -->
        <div class="col-md-3" role="complementary">
        <div class="bs-docs-sidebar hidden-print" id="bs-docs-sidebar">
    

    <ul class="nav bs-docs-sidenav">
        
    </ul>

    
    <!-- start:inject components -->
    
    <!-- end:inject components -->



    <a class="back-to-top" href="#top">
        <i class="glyphicon glyphicon-chevron-up"></i> Back to top
    </a>
</div>

        </div>
    </div>
</div>


<div id="footer">
    <div class="container bs-docs-container">
    <footer class="bs-docs-footer" role="contentinfo">
    <div class="row">
        <div class="col-xs-12">
            <nav aria-label="navigateClasses">
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="https://protelis.github.io/wiki-beta/wiki/examples/sac2015p2pplanning">
                                <span aria-hidden="true">&larr;</span>
                                <span>[0.1.0] Peer-to-peer route planning</span>
                            </a>
                        </li>
                    

                    
                </ul>
            </nav>
        </div>
    </div>
    <div class="icons">
    
    
        <a href="https://github.com/Protelis/Protelis" class="fa fa-github"></a>
    
    
    </div>
    <br>
    <p>
    Documentation template based on the
    <a href="https://github.com/mistic100/jekyll-bootstrap-doc">Jekyll Bootstrap Doc</a>
    Jekyll theme by the <a href="https://getbootstrap.com">Bootstrap team</a>. Site created with
    <a href="https://orchid.netlify.com">Orchid</a>.
</p>

<ul class="bs-docs-footer-links muted">
    <li>Currently 13.1.0-dev0d+10aa36bd</li>
</ul>

</footer>
    </div>
</div>


<!-- start:inject scripts -->
<script  src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script  src="https://netdna.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.3.0/bootbox.min.js"></script>
<script  src="https://protelis.github.io/wiki-beta/BsDoc/5d2166d8/assets/js/bsdoc.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/prism.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-kotlin.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-java.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-groovy.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-yaml.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-asciidoc.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-dart.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-markdown.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-python.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-javascript.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-xml.min.js"></script>
<script  src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.8.4/components/prism-scala.min.js"></script>
<!-- end:inject scripts -->

    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/trianglify/1.2.0/trianglify.min.js"></script>

<script>
    $(function () {
        window.colors = ['#2299d8', '#000000'];
                  
    trianglify({});

        buildNav();
    });
</script>

</body>
</html>